(this.webpackJsonpstranger_things=this.webpackJsonpstranger_things||[]).push([[0],{37:function(e,t,s){"use strict";s.r(t);var c=s(3),n=s.n(c),r=s(5),a=s(2),i=s(0),o=s(1),l=s(22),j=s.n(l),d=s(4),b=s(6),h=s(18),u=function(e){var t=e.posts,s=e.setFilterPost,c=Object(o.useState)(""),n=Object(a.a)(c,2),r=n[0],l=n[1];return Object(i.jsx)("form",{className:"search-form",children:Object(i.jsxs)("label",{children:["Search",Object(i.jsx)("input",{type:"search",placeholder:"whatever, whenever",size:50,onChange:function(e){return l(e.target.value)}}),Object(i.jsx)("input",{type:"submit",onClick:function(e){e.preventDefault();var c,n=[],a=r.split(" "),i=Object(h.a)(t);try{for(i.s();!(c=i.n()).done;){var o=c.value;e:for(var l=0,j=["location","title","price","description"];l<j.length;l++){var d,b=j[l],u=Object(h.a)(a);try{for(u.s();!(d=u.n()).done;){var p=d.value;if(!p)break;if(new RegExp(p,"i").test(o[b])){n.push(o);break e}}}catch(O){u.e(O)}finally{u.f()}}}}catch(O){i.e(O)}finally{i.f()}s(n)}}),Object(i.jsx)("input",{type:"reset",onClick:function(){return s([])}})]})})},p=function(e){var t=e.userName,s=e.posts,c=e.setFilterPost,n=e.filterPost;return Object(i.jsxs)("div",{className:"app-header",children:[Object(i.jsx)("div",{className:"app-title",children:Object(i.jsx)("h1",{children:"Stranger's Things"})}),Object(i.jsxs)("div",{className:"header-foot",children:[Object(i.jsx)("div",{className:"title-actions",children:Object(i.jsx)(u,{posts:s,filterPost:n,setFilterPost:c})}),Object(i.jsx)("div",{className:"welcome-span",children:Object(i.jsxs)("span",{children:["Welcome ",t]})})]})]})},O="https://strangers-things.herokuapp.com/api/2007-UNF-RM-WEB-PT";function x(e){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(n.a.mark((function e(t){var s,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}},e.prev=1,e.next=4,fetch("".concat(O,"/test/me"),s);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r.success?r.data.user.username:"Guest");case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(n.a.mark((function e(t,s){var c,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,password:s}})},e.prev=1,e.next=4,fetch("".concat(O,"/users/login"),c);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function f(e,t){return N.apply(this,arguments)}function N(){return(N=Object(r.a)(n.a.mark((function e(t,s){var c,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,password:s}})},e.prev=1,e.next=4,fetch("".concat(O,"/users/register"),c);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(r.a)(n.a.mark((function e(t){var s,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}},e.prev=1,e.next=4,fetch("".concat(O,"/posts"),s);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r.data.posts);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(r.a)(n.a.mark((function e(t){var s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/posts"),t);case 3:return s=e.sent,e.next=6,s.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=Object(r.a)(n.a.mark((function e(t){var s,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}},e.prev=1,e.next=4,fetch("".concat(O,"/users/me"),s);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function M(e,t,s){return D.apply(this,arguments)}function D(){return(D=Object(r.a)(n.a.mark((function e(t,s,c){var r,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({message:{content:s}})},e.prev=1,e.next=4,fetch("".concat(O,"/posts/").concat(t,"/messages"),r);case 4:return a=e.sent,e.next=7,a.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function Y(e,t){return T.apply(this,arguments)}function T(){return(T=Object(r.a)(n.a.mark((function e(t,s){var c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/posts/").concat(t),s);case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function L(e,t){return I.apply(this,arguments)}function I(){return(I=Object(r.a)(n.a.mark((function e(t,s){var c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/posts/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var U=function(e){var t=e.setUserName,s=e.setToken,c=e.setLoggedIn,l=e.user,j=e.setUser,d=e.pwd,h=e.setPwd,u=Object(b.g)(),p=Object(o.useState)(""),O=Object(a.a)(p,2),x=O[0],m=O[1],v=function(){var e=Object(r.a)(n.a.mark((function e(r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,g(l,d);case 3:(a=e.sent).error?m(a.error.message+"!"):m(""),a.success&&(s(a.data.token),localStorage.setItem("token",a.data.token),t(l),j(""),h(""),m(""),c(!0),document.getElementById("loginForm").reset(),u.push("/"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("aside",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("h2",{children:"Login"})}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{className:"right-body",children:Object(i.jsxs)("form",{id:"loginForm",onSubmit:v,method:"Post",children:[Object(i.jsxs)("label",{children:["Username: ",Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"text",className:"username",name:"username",onChange:function(e){j(e.target.value)},required:!0,autoComplete:"off"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[" Password:",Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"password",className:"pwd",name:"pwd",onChange:function(e){h(e.target.value)},required:!0})]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"submit",value:"Login",id:"formSubmit"}),Object(i.jsx)("button",{id:"formCancel",onClick:function(e){e.preventDefault(),document.getElementById("loginForm").reset(),u.push("/")},children:"Cancel"})]})}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{className:"loginMsg",style:{color:"red"},children:x})]})},A=function(e){var t=e.setLoggedIn,s=e.setToken,c=e.user,l=e.setUser,j=e.pwd,d=e.setPwd,h=e.setUserName,u=Object(b.g)(),p=Object(o.useState)(""),O=Object(a.a)(p,2),x=O[0],m=O[1],g=Object(o.useState)({}),v=Object(a.a)(g,2),N=v[0],y=v[1],w=Object(o.useState)(!0),k=Object(a.a)(w,2),S=k[0],C=k[1],P=Object(o.useState)(""),M=Object(a.a)(P,2),D=M[0],Y=M[1];Object(o.useEffect)((function(){y(j===x?{backgroundColor:"rgba(2,170,2,.3)"}:{backgroundColor:"rgba(255, 0, 0, .3)"}),C(!(j==x&&j.length>7&&c.length>5))}),[j,x,c]);var T=function(){var e=Object(r.a)(n.a.mark((function e(r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,f(c,j);case 3:(a=e.sent).error?Y(a.error.message):Y(""),a.success&&(s(a.data.token),localStorage.setItem("token",a.data.token),h(c),l(""),d(""),Y(""),t(!0),document.getElementById("registerForm").reset(),u.push("/new_user"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("aside",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-heading",children:Object(i.jsx)("h2",{children:"Register New User"})}),Object(i.jsx)("div",{className:"right-body",children:Object(i.jsxs)("form",{id:"registerForm",onSubmit:T,method:"Post",children:[Object(i.jsxs)("label",{children:["Username: ",Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"text",className:"username",name:"username",placeholder:"6 - 20 characters",maxLength:20,onChange:function(e){l(e.target.value)},required:!0,autoComplete:"off"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[" Password:",Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"password",className:"pwd",placeholder:"min 8, max 20 characters",name:"pwd",maxLength:20,onChange:function(e){d(e.target.value)},required:!0})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[" Confirm Password:",Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"password",className:"pwd",name:"pwd",style:N,onChange:function(e){m(e.target.value)},required:!0})]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"submit",value:"Register",className:"formSubmit",disabled:S}),Object(i.jsx)("button",{className:"formCancel",onClick:function(e){e.preventDefault(),document.getElementById("registerForm").reset(),u.push("/home")},children:"Cancel"})]})}),Object(i.jsx)("div",{className:"registerMsg",children:D})]})},q=s(11),E=s.n(q),F=Object(b.h)((function(e){var t=e.text,s=e.clickHandler;return Object(i.jsx)("button",{onClick:s,children:t})})),B=function(e){var t=e.posts,s=e.userName,c=e.setMessage,n=e.loggedIn,r=e.setSinglePost,a=Object(b.g)();return Object(i.jsx)("div",{className:"post-board",children:t.map((function(e){var t=e.title,o=e._id,l=e.description,j=e.price,d=e.willDeliver,b=e.createdAt,h=e.updatedAt,u=e.location,p=e.messages;return Object(i.jsxs)("div",{post_id:o,className:"post",children:[Object(i.jsxs)("div",{className:"post-header",children:[Object(i.jsx)("h1",{className:"post-title",children:t}),Object(i.jsx)("div",{className:"author",children:e.author.username})]}),Object(i.jsxs)("div",{className:"post-body",children:[Object(i.jsxs)("div",{className:"post-info",children:["Description: ",l]}),Object(i.jsxs)("div",{className:"post-info",children:["Price: ",j]}),Object(i.jsxs)("div",{className:"post-info",children:["Location: ",u]}),Object(i.jsxs)("div",{className:"post-info",children:["Will Deliver? ",d?"Yes":"No"]})]}),p.length?Object(i.jsxs)("div",{className:"post-messages",children:["Messages: ",p.map((function(e){var t=e._id,s=e.content,c=e.fromUser.username;return Object(i.jsx)("div",{className:"post-message",children:Object(i.jsxs)("div",{children:[c," says: ",s]})},t)}))," "]}):"",Object(i.jsxs)("div",{className:"post-actions",children:[Object(i.jsxs)("div",{className:"post-dates",children:[Object(i.jsxs)("p",{children:["Created: ",E()(b).format("ddd, MMM Do YYYY, h:mm:ss a")]}),Object(i.jsxs)("p",{children:["Updated: ",E()(h).format("ddd, MMM Do YYYY, h:mm:ss a")]})]}),Object(i.jsx)("div",{className:"post-buttons",children:Object(i.jsx)("span",{children:s===e.author.username?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F,{text:"Edit",clickHandler:function(){r(e),a.push("/editpost?".concat(o))}}),Object(i.jsx)(F,{text:"Delete",clickHandler:function(){r(e),a.push("/deletepost?".concat(o))}})]}):Object(i.jsx)(F,{text:"Post Message",clickHandler:function(){n?(r(e),a.push("/message?".concat(o))):c("Please login or register to post messages!")}})})})]})]},o)}))})},z=function(e){var t=e.option;return Object(i.jsx)("div",{className:t,children:Object(i.jsx)("div",{id:"loading",children:Object(i.jsx)("h2",{className:"gremlins",children:"Gremlins at work..."})})})},_=s(24),W=function(e){var t=e.token,s=e.setPosts,c=e.posts,l=Object(b.g)(),j=Object(o.useState)(""),d=Object(a.a)(j,2),h=d[0],u=d[1],p=Object(o.useState)(""),O=Object(a.a)(p,2),x=O[0],m=O[1],g=Object(o.useState)(""),v=Object(a.a)(g,2),f=v[0],N=v[1],w=Object(o.useState)("[On Request]"),S=Object(a.a)(w,2),C=S[0],P=S[1],M=Object(o.useState)(!1),D=Object(a.a)(M,2),Y=D[0],T=D[1],L=function(){var e=Object(r.a)(n.a.mark((function e(r){var a,i,o,j;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a={method:"Post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({post:{title:h,description:x,price:f,willDeliver:Y,location:C}})},e.next=5,k(a);case 5:if(!(i=e.sent).success){e.next=15;break}return(o=Object(_.a)(c)).push(i.data.post),s(o),e.next=12,y();case 12:j=e.sent,s(j),l.push("/home");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("aside",{className:"right-aside",children:[Object(i.jsxs)("div",{className:"right-header",children:[Object(i.jsx)("h2",{children:"Create Post"}),Object(i.jsx)("h3",{children:"Tell us a little information."})]}),Object(i.jsx)("div",{className:"right-body",children:Object(i.jsxs)("form",{id:"createForm",onSubmit:L,children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Title:"}),Object(i.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)},required:!0,maxLength:75,placeholder:"required",size:50}),Object(i.jsx)("br",{}),Object(i.jsx)("span",{className:"remainder",children:"("+(75-h.length)+") characters remaining"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Description:"}),Object(i.jsx)("textarea",{rows:"5",cols:"50",placeholder:"required",required:!0,maxLength:425,onChange:function(e){return m(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("span",{className:"remainder",children:"("+(425-x.length)+") characters remaining"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Price:"}),Object(i.jsx)("input",{type:"text",required:!0,maxLength:20,placeholder:"required",onChange:function(e){return N(e.target.value)}})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Location:"}),Object(i.jsx)("input",{type:"text",placeholder:"optional, [On Request] is default",size:50,onChange:function(e){return P(e.target.value)}})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Will Deliver:"}),Object(i.jsxs)("select",{onChange:function(e){return T(e.target.value)},children:[Object(i.jsx)("option",{value:!1,children:"False"}),Object(i.jsx)("option",{value:!0,children:"True"})]})]}),Object(i.jsx)("div",{className:"formActions",children:Object(i.jsxs)("span",{children:[Object(i.jsx)("input",{type:"submit"}),Object(i.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),document.getElementById("createForm").reset(),l.push("/home")},children:"Cancel"}),Object(i.jsx)("input",{type:"reset"})]})})]})})]})},R=function(e){var t=e.setUserName,s=e.setLoggedIn,c=e.setToken;return Object(i.jsxs)("footer",{children:[Object(i.jsx)(d.c,{to:"/create",style:{textDecoration:"none"},activeStyle:{fontWeight:"bold",color:"red",textDecoration:"none",fontSize:"1.25em",textShadow:"2px 2px blue"},children:"Create Post"}),Object(i.jsx)(d.c,{to:"/myposts",style:{textDecoration:"none"},activeStyle:{fontWeight:"bold",color:"red",textDecoration:"none",fontSize:"1.25em",textShadow:"2px 2px blue"},children:" My Posts"}),Object(i.jsx)(d.c,{to:"/mymessages",style:{textDecoration:"none"},activeStyle:{fontWeight:"bold",color:"red",textDecoration:"none",fontSize:"1.25em",textShadow:"2px 2px blue"},children:"My Messages"}),Object(i.jsx)(d.b,{to:"/",style:{textDecoration:"none"},children:"Home"}),Object(i.jsx)(d.b,{style:{textDecoration:"none"},onClick:function(){t("Guest"),s(!1),localStorage.removeItem("token"),c("")},to:"/",children:"Logout"})]})},H=function(e){var t=e.message,s=Object(b.g)();return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("section",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("h2",{children:"Welcome to Stranger's Things!"})}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"right-body",children:[Object(i.jsx)("p",{children:"If it's your first time here, please register."}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{className:"register",onClick:function(){return s.push("/register")},children:"Register"}),Object(i.jsx)("br",{}),Object(i.jsx)("p",{children:"Returning users, please login."}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{className:"logButton",onClick:function(){return s.push("/login")},children:"Login"}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{className:"info-message",children:Object(i.jsx)("p",{children:t})})]})]})})},J=function(e){var t=e.userName,s=e.myMessages,c=e.myPosts;return Object(i.jsxs)("div",{className:"right-aside user",children:[Object(i.jsxs)("div",{className:"right-header",children:[Object(i.jsx)("h2",{className:"right-title"}),Object(i.jsx)("br",{}),Object(i.jsxs)("h2",{children:["Hi ",t]})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"right-body",children:[Object(i.jsxs)(d.b,{to:"/mymessages",style:{textDecoration:"none"},children:["You have ",s," messages."]}),Object(i.jsx)("br",{}),Object(i.jsxs)(d.b,{to:"/myposts",style:{textDecoration:"none"},children:["You have ",c," post(s)."]}),Object(i.jsx)("br",{}),Object(i.jsx)(d.b,{to:"/create",style:{textDecoration:"none"},children:"Create Post"}),Object(i.jsx)("br",{}),Object(i.jsx)(d.b,{style:{textDecoration:"none"},onClick:function(){setUserName("Guest"),setLoggedIn(!1),localStorage.removeItem("token"),setToken("")},to:"/",children:"Logout"})]})]})},G=function(e){var t=e.myMessages,s=e.userName,c=Object(o.useState)([]),n=Object(a.a)(c,2),r=n[0],l=n[1],j=Object(o.useState)([]),d=Object(a.a)(j,2),h=d[0],u=d[1];return Object(o.useEffect)((function(){if(t.length){var e=[],c=[];t.map((function(t){return t.fromUser.username===s?e.push(t):c.push(t)})),e.sort((function(e){return e.post.title})),c.sort((function(e){return e.post.title})),l(e),u(c)}}),[]),t.length&&t?Object(i.jsxs)("div",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("div",{className:"right-title",children:Object(i.jsx)("h1",{children:"My Messages"})})}),Object(i.jsx)("div",{className:"right-body",children:Object(i.jsxs)("div",{className:"myMessages",children:[Object(i.jsx)("h3",{children:"Recieved Messages"}),t.length?h.map((function(e){var t=e._id,s=e.post.title,c=e.fromUser.username,n=e.content;return Object(i.jsxs)("div",{className:"message",children:[Object(i.jsxs)("div",{className:"message-title",children:["Post: ",s]}),Object(i.jsxs)("div",{className:"message-body",children:[Object(i.jsxs)("p",{children:["Message: ",n]}),Object(i.jsxs)("p",{children:["From: ",c]})]})]},t)})):Object(i.jsx)("p",{children:"You have no messages at this time."}),Object(i.jsx)("h3",{children:"Sent Messages"}),r.map((function(e){var t=e._id,s=e.post.title,c=e.fromUser.username,n=e.content;return Object(i.jsxs)("div",{className:"message",children:[Object(i.jsxs)("div",{className:"message-title",children:["Post: ",s]}),Object(i.jsxs)("div",{className:"message-body",children:[Object(i.jsxs)("p",{children:["Message: ",n]}),Object(i.jsxs)("p",{children:["From: ",c]})]})]},t)}))]})})]}):Object(i.jsx)(b.a,{to:"/"})},K=function(e){var t=e.myPosts,s=e.setSinglePost,c=Object(o.useState)([]),n=Object(a.a)(c,2),r=n[0],l=n[1],j=Object(o.useState)([]),d=Object(a.a)(j,2),h=d[0],u=d[1],p=Object(b.g)();return Object(o.useEffect)((function(){if(t.length){var e=[];t.map((function(t){t.active&&e.push(t)})),l(e);var s=[];t.map((function(e){e.active||s.push(e)})),u(s)}}),[]),t.length&&t?Object(i.jsxs)("div",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("h2",{className:"right-title",children:"My Posts"})}),Object(i.jsx)("div",{className:"right-body",children:t.length?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{id:"active-posts",children:[Object(i.jsx)("h3",{children:"Active Posts"})," ",r.length?r.map((function(e){var t=e.title,c=e._id,n=e.description,r=e.price,a=e.willDeliver,o=e.createdAt,l=e.updatedAt,j=e.location;return Object(i.jsxs)("div",{className:"mypost",children:[Object(i.jsxs)("div",{className:"post-header",children:[Object(i.jsx)("h1",{className:"post-title",children:t}),Object(i.jsx)("div",{className:"author",children:e.author.username})]}),Object(i.jsxs)("div",{className:"post-body",children:[Object(i.jsxs)("div",{className:"post-info",children:["Description: ",n]}),Object(i.jsxs)("div",{className:"post-info",children:["Price: ",r]}),Object(i.jsxs)("div",{className:"post-info",children:["Location: ",j]}),Object(i.jsxs)("div",{className:"post-info",children:["Will Deliver? ",a?"Yes":"No"]})]}),Object(i.jsxs)("div",{className:"post-actions",children:[Object(i.jsxs)("div",{className:"post-dates",children:[Object(i.jsxs)("p",{children:["Created: ",E()(o).format("ddd, MMM Do YYYY, h:mm:ss a")]}),Object(i.jsxs)("p",{children:["Updated: ",E()(l).format("ddd, MMM Do YYYY, h:mm:ss a")]})]}),Object(i.jsx)("div",{className:"post-buttons",children:Object(i.jsxs)("span",{children:[Object(i.jsx)(F,{text:"Edit",clickHandler:function(){s(e),p.push("/editpost?".concat(c))}}),Object(i.jsx)(F,{text:"Delete"})]})})]})]},c)})):Object(i.jsx)("p",{children:"You have no active posts at this time. Click Create Post to make a post."})," "]}),Object(i.jsxs)("div",{id:"inactive-posts",children:[" ",Object(i.jsx)("h3",{children:"Inactive Posts"}),h.map((function(e){var t=e.title,s=e._id,c=e.description,n=e.price,r=e.willDeliver,a=e.createdAt,o=e.updatedAt,l=e.location;return Object(i.jsxs)("div",{className:"mypost",children:[Object(i.jsxs)("div",{className:"post-header",children:[Object(i.jsx)("h1",{className:"post-title",children:t}),Object(i.jsx)("div",{className:"author",children:e.author.username})]}),Object(i.jsxs)("div",{className:"post-body",children:[Object(i.jsxs)("div",{className:"post-info",children:["Description: ",c]}),Object(i.jsxs)("div",{className:"post-info",children:["Price: ",n]}),Object(i.jsxs)("div",{className:"post-info",children:["Location: ",l]}),Object(i.jsxs)("div",{className:"post-info",children:["Will Deliver? ",r?"Yes":"No"]})]}),Object(i.jsx)("div",{className:"post-actions",children:Object(i.jsxs)("div",{className:"post-dates",children:[Object(i.jsxs)("p",{children:["Created: ",E()(a).format("ddd, MMM Do YYYY, h:mm:ss a")]}),Object(i.jsxs)("p",{children:["Updated: ",E()(o).format("ddd, MMM Do YYYY, h:mm:ss a")]})]})})]},s)}))]})]}):Object(i.jsx)("p",{children:"You have no posts at this time. Click Create Post to make a post."})})]}):Object(i.jsx)(b.a,{to:"/"})},Q=function(){return Object(i.jsx)("div",{className:"right-aside",children:Object(i.jsxs)("div",{className:"right-header",children:[Object(i.jsx)("h2",{className:"right-title",children:"Welcome to Stranger's Things"}),Object(i.jsx)("div",{className:"right-body",children:Object(i.jsx)("div",{children:Object(i.jsxs)("div",{id:"newuser",children:[Object(i.jsx)("br",{}),Object(i.jsx)("p",{children:"Let's get you started.  You can create a new post so everyone can see what you are willing to sell or give away."}),Object(i.jsx)("br",{}),Object(i.jsx)("p",{children:"Messaging is simple, just find a post/item you like and click message to bring up the message form.  Once your item is sold or given away you can delete your post or edit if things change.  Use the links at the bottom to navigate the site."}),Object(i.jsx)("br",{}),Object(i.jsx)("p",{children:" Don't forget to logout as the site will leave you logged in."})]})})})]})})},V=function(e){var t=e.singlePost,s=e.token,c=e.setMyPosts,l=e.setMyMessages,j=Object(o.useState)(""),d=Object(a.a)(j,2),h=d[0],u=d[1],p=Object(o.useState)(""),O=Object(a.a)(p,2),x=O[0],m=O[1],g=Object(b.g)(),v=function(){var e=Object(r.a)(n.a.mark((function e(r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,M(t._id,h,s);case 3:if(!e.sent.success){e.next=13;break}return e.next=7,C(s);case 7:a=e.sent,c(a.data.posts),l(a.data.messages),g.push("/home"),e.next=14;break;case 13:m("Message edit did not work, please try again or blame Kyle");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("h2",{className:"right-title",children:"Send Message"})}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"right-body",children:[Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{children:[" ",t.title]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Message:"}),Object(i.jsx)("textarea",{rows:"9",cols:"50",placeholder:"What do you want to say?",required:!0,maxLength:450,onChange:function(e){return u(e.target.value)},style:{resize:"none"}}),Object(i.jsx)("br",{}),Object(i.jsx)("span",{className:"remainder",children:"("+(450-h.length)+") characters remaining"})]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"submit",onClick:v}),Object(i.jsx)("input",{type:"reset"})]}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{onClick:function(){return g.goBack()},children:"Cancel"})]}),Object(i.jsx)("div",{className:"error-message",children:x})]})},X=function(e){var t=e.singlePost,s=e.token,c=e.setPosts,l=Object(b.g)(),j=Object(o.useState)(t.title),d=Object(a.a)(j,2),h=d[0],u=d[1],p=Object(o.useState)(t.description),O=Object(a.a)(p,2),x=O[0],m=O[1],g=Object(o.useState)(t.price),v=Object(a.a)(g,2),f=v[0],N=v[1],w=Object(o.useState)(t.location),k=Object(a.a)(w,2),S=k[0],C=k[1],P=Object(o.useState)(t.willDeliver),M=Object(a.a)(P,2),D=M[0],T=M[1],L=Object(o.useState)(""),I=Object(a.a)(L,2),U=I[0],A=I[1],q=function(){var e=Object(r.a)(n.a.mark((function e(r){var a,i,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),i={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:a="Bearer "+s},body:JSON.stringify({post:{title:h,description:x,price:f,willDeliver:D,location:S}})},e.next=5,Y(t._id,i);case 5:if(!e.sent.success){e.next=14;break}return e.next=9,y({headers:{"Content-Type":"application/json",Authorization:a}});case 9:o=e.sent,c(o),l.push("/"),e.next=15;break;case 14:A("Message edit did not work, please try again or blame Kyle.");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(i.jsxs)("div",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("h2",{className:"right-title",children:"Edit Your Post"})}),Object(i.jsxs)("div",{className:"right-body",children:[Object(i.jsxs)("form",{id:"createForm",onSubmit:q,children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Title:"}),Object(i.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)},value:h,required:!0,maxLength:75,placeholder:"required",size:50}),Object(i.jsx)("br",{}),Object(i.jsx)("span",{className:"remainder",children:"("+(75-h.length)+") characters remaining"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Description:"}),Object(i.jsx)("textarea",{rows:"5",cols:"50",placeholder:"required",value:x,required:!0,maxLength:425,onChange:function(e){return m(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("span",{className:"remainder",children:"("+(425-x.length)+") characters remaining"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Price:"}),Object(i.jsx)("input",{type:"text",required:!0,maxLength:20,value:f,placeholder:"required",onChange:function(e){return N(e.target.value)}})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Location:"}),Object(i.jsx)("input",{type:"text",placeholder:"optional, [On Request] is default",value:S,size:50,onChange:function(e){return C(e.target.value)}})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("label",{children:[Object(i.jsx)("div",{className:"info-header",children:"Will Deliver:"}),Object(i.jsxs)("select",{onChange:function(e){return T(e.target.value)},value:D,children:[Object(i.jsx)("option",{value:!1,children:"False"}),Object(i.jsx)("option",{value:!0,children:"True"})]})]}),Object(i.jsx)("div",{className:"formActions",children:Object(i.jsxs)("span",{children:[Object(i.jsx)("input",{type:"submit",text:"Submit Changes"}),Object(i.jsx)("button",{type:"button",onClick:function(){return l.goBack()},children:"Cancel"})]})})]}),Object(i.jsx)("div",{className:"Error-message",children:U})]})]}):Object(i.jsx)(b.a,{to:"/"})},Z=function(e){var t=e.singlePost,s=e.token,c=e.setPosts,a=Object(b.g)(),o=t.title,l=t._id,j=t.description,d=t.price,h=t.location,u=t.willDeliver,p=t.createdAt,O=t.updatedAt,x=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(l,s);case 2:if(!e.sent.success){e.next=11;break}return e.next=6,y({headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(s)}});case 6:t=e.sent,c(t),a.push("/"),e.next=12;break;case 11:setMsg("Message edit did not work, please try again or blame Kyle.");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(i.jsxs)("div",{className:"right-aside",children:[Object(i.jsx)("div",{className:"right-header",children:Object(i.jsx)("h2",{className:"right-title",children:"Delete Post?"})}),Object(i.jsxs)("div",{className:"right-body",children:[Object(i.jsxs)("div",{post_id:l,className:"mypost",children:[Object(i.jsxs)("div",{className:"post-header",children:[Object(i.jsx)("h1",{className:"post-title",children:o}),Object(i.jsx)("div",{className:"author",children:t.author.username})]}),Object(i.jsxs)("div",{className:"post-body",children:[Object(i.jsxs)("div",{className:"post-info",children:["Description: ",j]}),Object(i.jsxs)("div",{className:"post-info",children:["Price: ",d]}),Object(i.jsxs)("div",{className:"post-info",children:["Location: ",h]}),Object(i.jsxs)("div",{className:"post-info",children:["Will Deliver? ",u?"Yes":"No"]})]}),Object(i.jsx)("div",{className:"post-actions",children:Object(i.jsxs)("div",{className:"post-dates",children:[Object(i.jsxs)("p",{children:["Created: ",E()(p).format("ddd, MMM Do YYYY, h:mm:ss a")]}),Object(i.jsxs)("p",{children:["Updated: ",E()(O).format("ddd, MMM Do YYYY, h:mm:ss a")]})]})})]}),Object(i.jsxs)("div",{className:"actions",children:[Object(i.jsx)("button",{onClick:x,children:"Confirm Deletion"}),Object(i.jsx)("button",{onClick:function(){return a.goBack()},children:"Cancel"})]})]})]}):Object(i.jsx)(b.a,{to:"/"})},$=function(){var e=Object(o.useState)("Stranger"),t=Object(a.a)(e,2),s=t[0],c=t[1],l=Object(o.useState)(!1),j=Object(a.a)(l,2),h=j[0],u=j[1],O=Object(o.useState)(localStorage.getItem("token")),m=Object(a.a)(O,2),g=m[0],v=m[1],f=Object(o.useState)(""),N=Object(a.a)(f,2),w=N[0],k=N[1],S=Object(o.useState)(""),P=Object(a.a)(S,2),M=P[0],D=P[1],Y=Object(o.useState)([]),T=Object(a.a)(Y,2),L=T[0],I=T[1],q=Object(o.useState)([]),E=Object(a.a)(q,2),F=E[0],_=E[1],$=Object(o.useState)([]),ee=Object(a.a)($,2),te=ee[0],se=ee[1],ce=Object(o.useState)(""),ne=Object(a.a)(ce,2),re=ne[0],ae=ne[1],ie=Object(o.useState)(""),oe=Object(a.a)(ie,2),le=oe[0],je=oe[1],de=Object(o.useState)([]),be=Object(a.a)(de,2),he=be[0],ue=be[1];return Object(o.useEffect)(Object(r.a)(n.a.mark((function e(){var t,s,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=18;break}return u(!0),e.t0=c,e.next=5,x(g);case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=9,C(g);case 9:return t=e.sent,_(t.success?t.data.posts:[]),se(t.success?t.data.messages:[]),e.next=14,y(g);case 14:s=e.sent,I(s),e.next=24;break;case 18:return e.next=20,y(g);case 20:r=e.sent,I(r),_([]),se([]);case 24:case 25:case"end":return e.stop()}}),e)}))),[g]),Object(i.jsxs)(d.a,{children:[Object(i.jsx)(p,{userName:s,loggedIn:h,posts:L,setFilterPost:ue}),Object(i.jsxs)("section",{className:"app-body",children:[L.length?he.length?Object(i.jsx)(B,{posts:he,userName:s,setMessage:ae,loggedIn:h,setSinglePost:je}):Object(i.jsx)(B,{posts:L,userName:s,setMessage:ae,loggedIn:h,setSinglePost:je}):Object(i.jsx)(z,{option:"post-board"}),Object(i.jsxs)(b.d,{children:[Object(i.jsx)(b.b,{path:"/login",children:Object(i.jsx)(U,{setUserName:c,setToken:v,setLoggedIn:u,user:M,setUser:D,pwd:w,setPwd:k})}),Object(i.jsx)(b.b,{path:"/register",children:Object(i.jsx)(A,{setUserName:c,user:M,setToken:v,setLoggedIn:u,setUser:D,pwd:w,setPwd:k})}),Object(i.jsx)(b.b,{path:"/create",children:Object(i.jsx)(W,{setPosts:I,token:g,posts:L})}),Object(i.jsx)(b.b,{path:"/mymessages",children:Object(i.jsx)(G,{myMessages:te,userName:s})}),Object(i.jsx)(b.b,{path:"/myposts",children:Object(i.jsx)(K,{myPosts:F,setSinglePost:je})}),Object(i.jsx)(b.b,{path:"/new_user",children:Object(i.jsx)(Q,{})}),Object(i.jsx)(b.b,{path:"/editpost",children:Object(i.jsx)(X,{singlePost:le,token:g,setPosts:I})}),Object(i.jsx)(b.b,{path:"/message",children:Object(i.jsx)(V,{singlePost:le,token:g,setMyMessages:se,setMyPosts:_})}),Object(i.jsx)(b.b,{path:"/deletepost",children:Object(i.jsx)(Z,{singlePost:le,token:g,setPosts:I})}),Object(i.jsx)(b.b,{exact:!0,path:"/",children:h?Object(i.jsx)(J,{userName:s,myMessages:te.length,myPosts:F.length,option:te}):Object(i.jsx)(H,{message:re})}),Object(i.jsx)(b.b,{path:"*",children:Object(i.jsx)(b.a,{to:"/"})})]})]}),h?Object(i.jsx)(R,{setLoggedIn:u,setUserName:c,setToken:v}):Object(i.jsx)("footer",{children:Object(i.jsx)("div",{className:"app-title",children:Object(i.jsx)("h2",{children:"Stranger's Things"})})})]})};j.a.render(Object(i.jsx)($,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.097093a0.chunk.js.map